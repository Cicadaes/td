<div class="schedule">
  <div class="sch-item">
    <span class="badge">1</span>
    <p class="text">报告类型</p>
  </div>
  <span class="divider"></span>
  <div class="sch-item">
    <span class="badge">2</span>
    <p class="text">编辑信息</p>
  </div>
  <span class="divider"></span>
  <div class="sch-item inactive">
    <span class="badge">3</span>
    <p class="text">完成提交</p>
  </div>
</div>
<nz-card>
  <ng-template #body>
    <form nz-form [formGroup]="validateForm">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col nzSpan="2">
          <label>报告名称</label>
        </div>
        <div nz-form-control nz-col nzSpan="22">
          <nz-input formControlName="exportName" nzPlaceHolder="输入授权用户的登录邮箱..."></nz-input>
          <div nz-form-explain *ngIf="getFormControl('exportName').dirty&&getFormControl('exportName').hasError('required')">此为必填项!</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col nzSpan="2">
          <label>时间范围</label>
        </div>
        <div nz-form-control nz-col nzSpan="22">
          <nz-rangepicker formControlName="timeRange" nzShowTime [nzFormat]="'YYYY-MM-DD'" (ngModelChange)="getMonitorList()"></nz-rangepicker>
          <div nz-form-explain *ngIf="getFormControl('timeRange').dirty&&getFormControl('timeRange').hasError('required')">此为必填项!</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col nzSpan="2">
          <label>数据范围</label>
        </div>
        <div nz-form-control nz-col nzSpan="22" class="checkbox-group">
          <div class="select-data-bar">
            <nz-input nzPlaceHolder="输入关键字搜索" id="search" [(ngModel)]="searchValue"  [ngModelOptions]="{ standalone: true }">
              <ng-template #prefix>
                <i class="anticon anticon-search"></i>
              </ng-template>
            </nz-input>
            <span class="select-data-detail">已选择 {{selectedChannelNum}} 个媒体，{{selectedMonitorNum}} 个链接</span>
          </div>
          <div nz-form-explain *ngIf="monitorList.length == 0 && !searchValue">选择时间范围后才能选择数据范围</div>
          <ng-template ngFor let-item [ngForOf]="monitorList | farray:['activityName']:searchValue">
            <select-pane 
              [formControlName]="'monitorLinks' + item.index" 
              [title]="item.activityName"
              (ngModelChange)="operateSelectedNum()"
              (onAfterViewInit)="operateSelectedNum()"
            ></select-pane>
          </ng-template>
        </div>
      </div>
      <div nz-form-item nz-row *ngIf="reportModel.reportType == 10">
        <div nz-form-label nz-col nzSpan="2">
          <label>时间维度</label>
        </div>
        <div nz-form-control nz-col nzSpan="22">
          <nz-checkbox-group formControlName="timeDimension"></nz-checkbox-group>
        </div>
      </div>
      <div nz-form-item nz-row *ngIf="reportModel.reportType == 10">
        <div nz-form-label nz-col nzSpan="2">
          <label>人群维度</label>
        </div>
        <div nz-form-control nz-col nzSpan="22">
          <nz-checkbox-group formControlName="peopleDimension"></nz-checkbox-group>
        </div>
      </div>
      <div nz-form-item nz-row *ngIf="reportModel.reportType == 10">
        <div nz-form-label nz-col nzSpan="2">
          <label>设备维度</label>
        </div>
        <div nz-form-control nz-col nzSpan="22">
          <nz-checkbox-group formControlName="deviceDimension"></nz-checkbox-group>
        </div>
      </div>
      <div nz-form-item nz-row *ngIf="reportModel.reportType == 10">
        <div nz-form-label nz-col nzSpan="2">
          <label>地域维度</label>
        </div>
        <div nz-form-control nz-col nzSpan="22">
          <nz-select formControlName="regionDimension" style="width: 120px;" nzPlaceHolder="请选择地域维度..." nzShowSearch>
            <nz-option *ngFor="let option of areasDimension" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
          </nz-select>
        </div>
      </div>
      <div nz-form-item nz-row *ngIf="reportModel.reportType == 10">
        <div nz-form-label nz-col nzSpan="2">
          <label>指标选择</label>
        </div>
        <div nz-form-control nz-col nzSpan="22" class="checkbox-group">
          <select-pane formControlName="metric" [shouldFold]="false"></select-pane>
        </div>
      </div>
      <div class="btn-group" nz-row>
        <button (click)="nextStep()" nz-button class="next" nz-col nzSpan="5" nzOffset="2" nzType="primary">
          <span>保存</span>
        </button>
        <button (click)="backUp()" nz-button class="back" nz-col nzSpan="5">
          <span>取消</span>
        </button>
      </div>
    </form>
  </ng-template>
</nz-card>
