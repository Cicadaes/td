<div class="cc_main">
  <cm-steps>
    <nz-steps [(nzCurrent)]="current">
      <nz-step [nzTitle]="'基础信息'">
        <ng-template #nzIcon>
          <i class="icon-info"></i>
        </ng-template>
      </nz-step>
      <nz-step [nzTitle]="'营销信息'">
        <ng-template #nzIcon>
          <i class=" icon-message"></i>
        </ng-template>
      </nz-step>
    </nz-steps>

    <div class="steps-content">
      <!-- 基础信息 -->
      <form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm()" *ngIf="current<1">
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
            <label for="brandName" >品牌名称</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="21" class="steps-content-form-control">
            <nz-input 
              [nzSize]="'large'" 
              formControlName="brandName" 
              [nzId]="'brandName'" 
              [nzPlaceHolder]="'请输入品牌名称'"></nz-input>
            <div 
              nz-form-explain 
              *ngIf="getFormControl('brandName').dirty && getFormControl('brandName').hasError('required')">
              品牌名称不能为空！
            </div>
          </div>
          <div class="recentBrand" >
              <span *ngFor='let item of brandList' (click)="changeBrandName(item)">{{item}}</span>
            </div>
        </div>
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
            <label for="password" >所属行业</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="21">
            <div class="tradeBox">
              <dl *ngFor='let data of tradeData; let i=index' 
                  class="tradeList"
                  nz-col 
                  [nzSpan]="6" data-id='data.id' 
                  (click)="industryClick(i)"
                  [ngClass]="{'onSelected': isShow===i}">
                <dt>
                  <i class="{{data.icon}} "></i>
                </dt>
                <dd>{{data.name}}</dd>
              </dl>
            </div>
          </div>
        </div>
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
            <label for="name " >活动名称</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="21" class="steps-content-form-control">
            <nz-input 
              [nzSize]="'large'" 
              formControlName="name" 
              [nzType]="'name'" 
              [nzId]="'name'" 
              [nzPlaceHolder]="'请输入活动名称'"></nz-input>
            <div nz-form-explain 
                *ngIf="getFormControl('name').dirty && getFormControl('name').hasError('required')">活动名称不能为空！</div>
            <div nz-form-explain style="color: #f04134" *ngIf="errorCode">该活动已存在！</div>
          </div>
        </div>
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
            <label for="time " >起止时间</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="21" class="steps-content-form-control">
            <nz-rangepicker 
              [(ngModel)]="_dateRange" 
              formControlName="time" 
              [nzFormat]="'YYYY-MM-DD'" 
              [nzDisabledDate]="_disabledDate"></nz-rangepicker>
            <div nz-form-explain 
                *ngIf="getFormControl('time').dirty && getFormControl('time').hasError('required')">起止时间不能为空！</div>
          </div>
        </div>
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
          </div>
          <div nz-form-control nz-col [nzSpan]="21">
            <cm-button>
              <button 
                nz-button 
                [nzType]="'primary'" 
                (click)="_submitForm() " 
                *ngIf="current < 1 ">
                <span>下一步</span>
              </button>
            </cm-button>
          </div>
        </div>
      </form>
      <!-- 营销信息 -->
      <div *ngIf="!(current < 1)" class="diet">

        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
            <label for="email">目标受众</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="13" class="steps-content-form-control">
          <cm-select>
              <nz-select style="width: 300px;" 
                        [(ngModel)]="selectedOption" 
                        [nzSize]="size"  
                        [nzPlaceHolder]="'添加受众'">
                <nz-option *ngFor="let option of searchOptions" 
                            [nzLabel]="option.label"
                            [nzValue]="option.value" 
                            [nzDisabled]="option.disabled">
                </nz-option>
              </nz-select>
            </cm-select>
          </div>
        </div>
        <div nz-form-item nz-row>
          <div nz-form-label nz-col [nzSpan]="3">
          </div>
          <div nz-form-label nz-col [nzSpan]="8">
            <P>关于目标受众的编辑，可前往<a routerLink="/manage-center/crowd" >管理中心的受众管理</a></P>
          </div>
        </div>
        <div nz-form-item nz-row class="enWidth">
          <div nz-form-label nz-col [nzSpan]="3">
            <label for="email" >曝光频次</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="21">
            <span 
              *ngFor="let i of exposureNum ; let i=index" class="exposure" 
              (click)="impressionClick(i)"
              [ngClass]='{"onExposure": impression === i}'
            >{{ i }}</span>
          </div>
        </div>
        <div nz-form-item nz-row class="enWidth">
          <div nz-form-label nz-col [nzSpan]="3">
          </div>
          <div nz-form-control nz-col [nzSpan]="21">
            <button nz-button [nzType]="'primary'" (click)="submit(1)">
              <span>提交并创建监测链接</span>
            </button>
            <button style="width: 200px;" nz-button [nzType]="'default'" (click)="submit(2)">
              <span>提交</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </cm-steps>
</div>
