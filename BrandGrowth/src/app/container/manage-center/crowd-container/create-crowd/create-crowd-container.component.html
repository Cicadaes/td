<nz-card class="main">
  <ng-template #body>
    <form nz-form #validateForm="ngForm">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="2">
          <label for="name">人群名称</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="21" [nzOffset]="1" class="steps-content-form-control">
          <nz-input [nzSize]="'large'" [(ngModel)]="name" name="name" [nzPlaceHolder]="'请输入人群名称'" #crowdName="ngModel" required></nz-input>
          <div nz-form-explain *ngIf="crowdName.dirty&&crowdName.hasError('required')">人群名称为必填项!</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="2">
          <label>人群属性</label>
        </div>
        <div nz-col [nzSpan]="21" [nzOffset]="1">
          <div class="crowd-attr-wap">
            <div class="crowd-attr">
              <ul class="crowd-attr-ul">
                <li [ngClass]="{'bg-color': firstId == attr.code}" (click)="nextLevel(attr, '1', 'attr')">
                  <span>{{attr.title}}</span>
                  <i class="anticon anticon-right next-level" *ngIf="firstId == attr.code"></i>
                </li>
                <li [ngClass]="{'bg-color': firstId == city.code}" (click)="nextLevel(city, '1', 'city')">
                  <span>{{city.title}}</span>
                  <i class="anticon anticon-right next-level" *ngIf="firstId == city.code"></i>
                </li>
                <li [ngClass]="{'bg-color': firstId == category.code}" (click)="nextLevel(category, '1', 'category')">
                  <span>{{category.title}}</span>
                  <i class="anticon anticon-right next-level" *ngIf="firstId == category.code"></i>
                </li>
              </ul>
            </div>
            <div class="crowd-attr">
              <ul class="crowd-attr-ul">
                <li *ngFor="let item of secondData;let i = index;" [ngClass]="{'bg-color': secondId == item.code}"  (click)="nextLevel(item, '2')">
                  <label nz-checkbox [(ngModel)]="item.isSelect" [ngModelOptions]="{standalone: true}" name="'key' + item.code" (ngModelChange)="updateAllChecked($event, item);" [nzIndeterminate]="item.indeterminate"></label>
                  <span>{{item.title}}</span>
                  <i class="anticon anticon-right next-level" *ngIf="secondId == item.code"></i>
                </li>
              </ul>
            </div>
            <div class="crowd-attr">
              <ul class="crowd-attr-ul">
                <li *ngFor="let item of thirdData;let i = index;">
                  <label nz-checkbox [(ngModel)]="item.isSelect" [ngModelOptions]="{standalone: true}" name="'key' + item.code" (ngModelChange)="updateSingleChecked($event, item);"></label>
                  <span>{{item.title}}</span>
                </li>
              </ul>
            </div>
            <div class="crowd-attr crowd-attr-special">
              <ul class="crowd-attr-ul-special">
                <li *ngFor="let item of dataList;let i = index;">
                  <p>{{item.title}}</p>
                  <i class="anticon anticon-close-circle-o next-level" (click)="deleteData(i, item.code)"></i>
                </li>
              </ul>
              <p class="border-bottom"></p>
              <span>已选择
                <b>{{dataList.length}}</b> 个</span>
            </div>
          </div>
          <button nz-button [nzType]="'primary'" (click)="confirm();">
            <span>确定</span>
          </button>
          <span style="width: 130px;display: inline-block;"></span>
          <a routerLink="/manage-center/crowd">取消</a>
          <!-- <button nz-button [nzType]="'default'" (click)="reset()">
            <span>取消</span>
          </button> -->
        </div>
      </div>
    </form>
  </ng-template>
</nz-card>
