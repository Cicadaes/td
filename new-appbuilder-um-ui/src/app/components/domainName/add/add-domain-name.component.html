<nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter"
    (nzOnCancel)="handleCancel($event)" [nzMaskClosable]='false'>
    <ng-template #modalTitle>
        <span *ngIf="editFlag === 'edit'">编辑域名前缀</span>
        <span *ngIf="editFlag === 'add'">新建域名前缀</span>
        <span *ngIf="editFlag === 'see'">域名前缀详情</span>
    </ng-template>
    <ng-template #modalContent>
        <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" autocomplete="off">
            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="name">名称</nz-form-label>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag !== 'see'">
                    <input id="name" type="name" nz-input formControlName="name" placeholder="请输入名称">
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('name').dirty && getFormControl('name').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('name').errors.required">
                            请输入名称
                        </ng-container>
                        <ng-container *ngIf="getFormControl('name').errors.forbiddenName && !getFormControl('name').errors.pattern">
                            只能输入中文、数字、英文字母、空格，长度最少2个、最多100个字符
                        </ng-container>
                        <ng-container *ngIf="getFormControl('name').errors.pattern">
                            开头结尾不能有空格
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag === 'see'">{{editData.name}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="domain">域名前缀</nz-form-label>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag !== 'see'">
                    <input id="domain" type="domain" nz-input formControlName="domain" placeholder="请输入域名前缀">
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('domain').dirty && getFormControl('domain').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('domain').errors.required">
                            请输入域名前缀
                        </ng-container>
                        <ng-container *ngIf="getFormControl('domain').errors.maxlength && !getFormControl('domain').errors.pattern">
                            如：http://api.talkingdata.com/mc，长度最少10个、最多256个字符
                        </ng-container>
                        <ng-container *ngIf="getFormControl('domain').errors.minlength && !getFormControl('domain').errors.pattern">
                            如：http://api.talkingdata.com/mc，长度最少10个、最多256个字符
                        </ng-container>
                        <ng-container *ngIf="getFormControl('domain').errors.forbiddenName && !getFormControl('domain').errors.pattern && !getFormControl('domain').errors.maxlength && !getFormControl('domain').errors.minlength">
                            如：http://api.talkingdata.com/mc，长度最少10个、最多256个字符
                        </ng-container>
                        <ng-container *ngIf="getFormControl('domain').errors.pattern">
                            开头结尾不能有空格
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag === 'see'">{{editData.domain}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="product">适用产品</nz-form-label>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag !== 'see'">
                    <nz-select [nzMode]="'multiple'" nzAllowClear [nzPlaceHolder]="'请选择适用产品'" [(ngModel)]="selectedOption"
                        (ngModelChange)="select($event)" [nzNotFoundContent]="'暂无数据'" nzShowSearch formControlName="product">
                        <nz-option *ngFor="let option of productOptions;let i = index;" [nzLabel]="option.label"
                            [nzValue]="option.value" nzCustomContent>
                            {{option.label}}
                        </nz-option>
                    </nz-select>
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('product').dirty && getFormControl('product').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('product').errors.required">
                            请选择适用产品
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag === 'see'">{{editData.catalogNames}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="description" class="cover-ant-form-item-label">描述</nz-form-label>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag !== 'see'">
                    <input id="description" type="description" nz-input formControlName="description" placeholder="请输入描述">
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('description').dirty && getFormControl('description').errors"
                        style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('description').errors.maxlength">
                            返回码不能超过256个字符
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="19" *ngIf="editFlag === 'see'">{{editData.description}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="code" class="cover-ant-form-item-label">创建人</nz-form-label>
                <nz-form-control [nzSpan]="19">{{editData.creator}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="createTime" class="cover-ant-form-item-label">创建时间</nz-form-label>
                <nz-form-control [nzSpan]="19">{{editData.createTime | dateFormatPipe:2}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="updater" class="cover-ant-form-item-label">更新人</nz-form-label>
                <nz-form-control [nzSpan]="19">{{editData.updater}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="5" nzRequired nzFor="updateTime" class="cover-ant-form-item-label">更新时间</nz-form-label>
                <nz-form-control [nzSpan]="19">{{editData.updateTime | dateFormatPipe:2}}</nz-form-control>
            </nz-form-item>
        </form>
    </ng-template>
    <ng-template #modalFooter>
        <button nz-button [nzType]="'default'" [nzSize]="large" (click)="handleCancel($event)">
            取消
        </button>
        <button nz-button [nzType]="'primary'" [nzSize]="large" (click)="save()">
            保存
        </button>
    </ng-template>
</nz-modal>