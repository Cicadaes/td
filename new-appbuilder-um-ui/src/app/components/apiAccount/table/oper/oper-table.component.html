<div class="text-content">
    <div class="table-operator clrfix">
        <button nz-button [nzType]="'primary'" (click)="add()">
            <i class="anticon anticon-plus"></i>API账号
        </button>
        <app-add-api-account [isVisible]="addFlag" (hideDialog)="hideDialog($event);" [editData]="editData" [editFlag]="editFlag"
            (saveDate)="saveDate();" [tenantId]='tenantId'></app-add-api-account>
    </div>
    <div class="operation-region">
        <ng-template #tableTotal>
            <div>
                总共 {{_total}} 条
            </div>
        </ng-template>
        <more-search [fieldArray]="moreSearchArray" (onSearch)="onMoreSearch($event)"></more-search>
        <nz-table #nzTable [nzData]="_dataSet" [nzShowTotal]="tableTotal" nzShowSizeChanger [nzLoading]="_loading" [nzTotal]="_total"
            [(nzPageIndex)]="_pageIndex" [(nzPageSize)]="_pageSize" [nzFrontPagination]="false" (nzPageSizeChange)="refreshData(true)"
            (nzPageIndexChange)="refreshData()">
            <thead>
                <tr>
                    <th [nzWidth]="'15%'" *ngIf="!tenantId" >
                        API所属租户
                    </th>
                    <th [nzWidth]="'15%'">
                        API账号名称
                    </th>
                    <th [nzWidth]="'10%'">
                        ApiKey
                    </th>
                    <th [nzWidth]="'10%'">
                        适用产品
                    </th>
                    <th [nzWidth]="'10%'">
                        状态
                    </th>
                    <th [nzWidth]="'15%'">
                        描述
                    </th>
                    <th [nzWidth]="'10%'">
                        创建日期
                    </th>
                    <th [nzWidth]="'15%'">
                        操作
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of nzTable.data">
                    <td *ngIf="!tenantId">{{data.companyName}}</td>
                    <td>{{data.name}}</td>
                    <td>{{data.apiKey}}</td>
                    <td>
                        <span *ngFor="let item of data.catalogList;let i = index;">{{item.name}}<i *ngIf="i !== (data.catalogList.length - 1)">,</i></span>
                    </td>
                    <td>
                        <nz-switch [(ngModel)]="data.status" [nzControl]="true" (click)="changeStatus($event, data)"
                            nzCheckedChildren="正常" nzUnCheckedChildren="禁用"></nz-switch>
                    </td>
                    <td>{{data.description | setValueLengthPipe:15}}</td>
                    <td>{{data.createTime | dateFormatPipe:2}}</td>
                    <td>
                        <a [routerLink]="[ '/apiAccountManagement/detail',data.id]" *ngIf="!tenantId">查看</a>
                        <a [routerLink]="[ '/tenants/tenantsApiAccount/'+tenantId+'/detail',data.id]" *ngIf="tenantId">查看</a>
                        <nz-divider nzType="vertical"></nz-divider>
                        <a href="javascript:;" (click)="edit(data)">编辑</a>
                        <nz-divider nzType="vertical"></nz-divider>
                        <a href="javascript:;" (click)="delete(data)">删除</a>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>
</div>