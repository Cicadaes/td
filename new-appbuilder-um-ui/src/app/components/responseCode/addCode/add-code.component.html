<nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter"
    (nzOnCancel)="handleCancel($event)" [nzMaskClosable]='false'>
    <ng-template #modalTitle>
        <span *ngIf="editFlag === 'edit'">编辑返回码</span>
        <span *ngIf="editFlag === 'add'">新建返回码</span>
        <span *ngIf="editFlag === 'see'">返回码详情</span>
    </ng-template>
    <ng-template #modalContent>
        <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" autocomplete="off">
            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="code">返回码</nz-form-label>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag !== 'see'">
                    <input id="code" type="code" nz-input formControlName="code" placeholder="请输入返回码">
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('code').dirty && getFormControl('code').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('code').errors.required">
                            请输入返回码
                        </ng-container>
                        <ng-container *ngIf="getFormControl('code').errors.forbiddenName && !getFormControl('code').errors.pattern">
                            只能输入数字、英文字母（大小写)，长度最少2个、最多50个字符
                        </ng-container>
                        <ng-container *ngIf="getFormControl('code').errors.pattern">
                            开头结尾不能有空格
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag === 'see'">{{editData.code}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="catalogSet">适用产品</nz-form-label>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag !== 'see'">
                    <nz-select [nzMode]="'multiple'" nzAllowClear [nzPlaceHolder]="'请选择适用产品'"
                        [(ngModel)]="selectedOption" (ngModelChange)="select($event)" [nzNotFoundContent]="'暂无数据'"
                        nzShowSearch formControlName="catalogSet">
                        <nz-option *ngFor="let option of productOptions;let i = index;" [nzLabel]="option.label"
                            [nzValue]="option.value" nzCustomContent>
                            {{option.label}}
                        </nz-option>
                    </nz-select>
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('catalogSet').dirty && getFormControl('catalogSet').errors"
                        style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('catalogSet').errors.required">
                            请选择适用产品
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag === 'see'">{{editData.catalogNames}}</nz-form-control>
            </nz-form-item>


            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="code">返回码解释</nz-form-label>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag !== 'see'">
                    <input id="reason" type="reason" nz-input formControlName="reason" placeholder="请输入返回码解释">
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('reason').dirty && getFormControl('reason').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('reason').errors.required">
                            请输入返回码解释
                        </ng-container>
                        <ng-container *ngIf="getFormControl('reason').errors.forbiddenName && !getFormControl('reason').errors.pattern">
                            只能输入中文、数字、英文字母、空格，长度最少2个、最多100个字符
                        </ng-container>
                        <ng-container *ngIf="getFormControl('reason').errors.pattern">
                            开头结尾不能有空格
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag === 'see'">{{editData.reason}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="code" class="cover-ant-form-item-label">解决方法</nz-form-label>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag !== 'see'">
                    <input id="solution" type="solution" nz-input formControlName="solution" placeholder="请输入解决方法">
                    <nz-form-explain style="color:red;" *ngIf="getFormControl('solution').dirty && getFormControl('solution').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('solution').errors.maxlength">
                            解决方法不能超过256个字符
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
                <nz-form-control [nzSpan]="20" *ngIf="editFlag === 'see'">{{editData.solution}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="code" class="cover-ant-form-item-label">创建人</nz-form-label>
                <nz-form-control [nzSpan]="20">{{editData.creator}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="createTime" class="cover-ant-form-item-label">创建时间</nz-form-label>
                <nz-form-control [nzSpan]="20">{{editData.createTime | dateFormatPipe:2}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="updater" class="cover-ant-form-item-label">更新人</nz-form-label>
                <nz-form-control [nzSpan]="20">{{editData.updater}}</nz-form-control>
            </nz-form-item>

            <nz-form-item [ngStyle]="{'margin-bottom':editFlag !== 'see' ? '' : '0px' }" *ngIf="editFlag === 'see'">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="updateTime" class="cover-ant-form-item-label">更新时间</nz-form-label>
                <nz-form-control [nzSpan]="20">{{editData.updateTime | dateFormatPipe:2}}</nz-form-control>
            </nz-form-item>
        </form>
    </ng-template>
    <ng-template #modalFooter>
        <button nz-button [nzType]="'default'" [nzSize]="large" (click)="handleCancel($event)">
            取 消
        </button>
        <button nz-button [nzType]="'primary'" [nzSize]="large" (click)="save()">
            确 定
        </button>
    </ng-template>
</nz-modal>