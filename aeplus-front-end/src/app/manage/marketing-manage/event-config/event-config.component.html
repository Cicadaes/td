<div class="content-div">
    <button nz-button nzType="primary" nzSize="default" (click)="create()">
        <span class="anticon anticon-plus"></span>新建事件</button>
    <div class="content-div-table shadow-content">
        <h3 class="content-div-table-tit module-title">事件相关配置列表
            <nz-input-group nzSuffixIcon="anticon anticon-search" style="float: right;width: 196px;margin-top: 12px;">
                <input type="text" [(ngModel)]="serachParam" nz-input (keyup)="serach($event)" placeholder="请输入事件名称进行检索" style="height: 24px;">
            </nz-input-group>
        </h3>
        <nz-table #nzTable nzShowSizeChanger [nzLoading]="eventTableLoading" [nzFrontPagination]="false" [nzData]="eventData" [(nzPageIndex)]="_pageIndex"
            [(nzPageSize)]="_pageSize" [(nzTotal)]='_total' (nzPageIndexChange)='PageIndexChange($event)' (nzPageSizeChange)='PageSizeChange($event)'
            [nzPageSizeOptions]='pageSizeOptions'>
            <thead nz-thead>
                <tr>
                    <th nz-th nzWidth="120px">事件名称</th>
                    <th nz-th nzWidth="10%">编码</th>
                    <th nz-th nzWidth="7%">状态</th>
                    <th nz-th nzWidth="10%">描述</th>
                    <th nz-th nzWidth="7%">计时器</th>
                    <th nz-th nzWidth="10%">触发器/事件</th>
                    <th nz-th nzWidth="7%">禁止规则</th>
                    <th nz-th nzWidth="7%">漏斗</th>
                    <th nz-th nzWidth="11%">创建人</th>
                    <th nz-th nzWidth="13%">更新时间</th>
                    <th nz-th nzWidth="8%">操作</th>
                </tr>
            </thead>
            <tbody nz-tbody>
                <tr nz-tbody-tr *ngFor="let item of nzTable.data">
                    <td nz-td title="{{item.name}}">{{item.name}}</td>
                    <td nz-td title="{{item.code}}">{{item.code}}</td>
                    <td nz-td><span [ngClass]="{'zw-color': true, 'inprogress-color': item.status == '0'}"></span><span *ngIf="item.status == '-1'" >禁用</span><span *ngIf="item.status == '0'">启用</span></td>
                    <td nz-td title="{{item.description}}">{{item.description}}</td>
                    <td nz-td>
                        <span [ngClass]="{'mocheck': true, 'bg':  item.timerFlag == '1' || item.timerFlag == true}">
                            <span class="anticon anticon-check" *ngIf="item.timerFlag == '1' || item.timerFlag == true"></span>
                        </span>
                    </td>
                    <td nz-td>
                        <span [ngClass]="{'mocheck': true, 'bg': item.triggerFlag == '1' || item.triggerFlag == true}">
                            <span class="anticon anticon-check" *ngIf="item.triggerFlag == '1' || item.triggerFlag == true"></span>
                        </span>
                    </td>
                    <td nz-td>
                        <span [ngClass]="{'mocheck': true, 'bg': item.forbidFlag == '1' || item.forbidFlag == true}">
                            <span class="anticon anticon-check" *ngIf="item.forbidFlag == '1' || item.forbidFlag == true"></span>
                        </span>
                    </td>
                    <td nz-td>
                        <span [ngClass]="{'mocheck': true, 'bg':  item.funnelFlag == '1' || item.funnelFlag == true}">
                            <span class="anticon anticon-check" *ngIf="item.funnelFlag == '1' || item.funnelFlag == true"></span>
                        </span>
                    </td>
                    <td nz-td>{{item.creator}}</td>
                    <td nz-td>{{item.updateTime}}</td>
                    <td nz-td>
                        <a (click)='edit(item);'>编辑</a>
                        <a (click)='delete(item);'>
                            <span *ngIf="item.status == '0'">禁用</span>
                            <span *ngIf="item.status == '-1'">启用</span>
                        </a>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>
</div>

<!-- 删除弹框 -->
<app-modal-dialog [itemObj]="itemObj" [isVisible]="removeFlag" (hideItemDialog)="hideItemDialog($event);" (confirmHideDialog)='confirmHideDialog($event)'></app-modal-dialog>

<!-- 新建指标相关配置及编辑指标相关配置-->
<app-add-event-config [isVisible]="isVisible" (hideDialog)="hideDialog($event);" [editData]="editData" [editFlag]="editFlag"
    (saveDate)="saveDate();"></app-add-event-config>