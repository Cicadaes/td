"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@angular/core");
const ng_cs_antd_1 = require("ng-cs-antd");
const cmMenuTree_service_1 = require("../cmMenuTree.service");
const createId_1 = require("./createId");
let MenuViewComponent = class MenuViewComponent {
    constructor(confirmServ, cmMenuTreeService) {
        this.confirmServ = confirmServ;
        this.cmMenuTreeService = cmMenuTreeService;
        this.click = false;
        this._hasSelect = true;
        this.onVoted = new core_1.EventEmitter();
    }
    set cmcheckFathser(cmcheckFathser) {
        this._cmcheckFathser = cmcheckFathser;
    }
    ;
    set hasSelect(hasSelect) {
        this._hasSelect = hasSelect;
    }
    ;
    set cmHasChecked(cmHasChecked) {
        this._cmHasChecked = cmHasChecked;
    }
    ;
    set cmHasEllips(cmHasEllips) {
        this._cmHasEllips = cmHasEllips;
    }
    ;
    set cmHasShow(cmHasShow) {
        this._cmHasShow = cmHasShow;
    }
    ;
    set cmHasRadio(cmHasRadio) {
        this._cmHasRadio = cmHasRadio;
    }
    ;
    set cmData(cmData) {
        this._cmData = cmData;
    }
    set cmHasMenu(cmHasMenu) {
        this._cmHasMenu = cmHasMenu;
    }
    ;
    set cmMenu(cmMenu) {
        this._cmMenu = cmMenu;
    }
    ngOnInit() {
    }
    // 移入变色
    enterItems(select) {
        select.ellipsisShow = true;
    }
    // 移出变色
    leavesItems(select) {
        select.ellipsisShow = false;
    }
    // 点击树状
    clickItems(select, data) {
        this.cmMenuTreeService.clickItems(select);
    }
    // 点击菜单项
    select(type, data, select) {
        select.menuShow = false;
        select.ellipsisShow = false;
        if (type == 'delete') {
            this.removeFile(data, select);
        }
        else if (type == 'update') {
            select.readonly = false;
            this.data = data;
            this.element.nativeElement.querySelector(`#input-${select.id}`).focus();
        }
        else if (type == 'create') {
            this.addFile(select);
        }
        else if (type == "move") {
            this.cmMenuTreeService.moveFile(select, data);
        }
        else {
            this.cmMenuTreeService.createMenu(type, select);
        }
    }
    // 输入框失焦
    inputBlur(comment) {
        comment.readonly = true;
        this.element.nativeElement.querySelector(`#input-${comment.id}`).blur();
    }
    // 编辑确认
    updateOK(comment) {
        comment.readonly = true;
        this.cmMenuTreeService.dataChange('update', comment);
    }
    // 删除文件
    removeFile(data, select) {
        let title = '';
        let that = this;
        if (select.children == [] || select.children.length == 0) {
            title = `您是否确认要删除${select.content}`;
        }
        else {
            title = `${select.content}包含多个文件，是否确认删除`;
        }
        this.confirmServ.confirm({
            title: title,
            onOk() {
                for (var i = 0; i < data.length; i++) {
                    if (data[i].id == select.id) {
                        data.splice(i, 1);
                        that.cmMenuTreeService.dataChange('delete', select);
                    }
                }
            },
            onCancel() {
            }
        });
    }
    ;
    // 新增文件
    addFile(select) {
        let scopeId = createId_1.Scope.getInstance().getscope();
        let obj = {
            "id": scopeId,
            "content": "",
            "show": true,
            "ellipsisShow": false,
            "menuShow": false,
            "checked": false,
            "readonly": true,
            "select": false,
        };
        obj['children'] = [];
        obj['customMenu'] = this._cmMenu;
        if (select.checked == true) {
            obj['checked'] = true;
        }
        if (select.children != []) {
            obj.content = '新增文件';
        }
        else {
            obj.content = '新增文件';
            select['children'] = [];
        }
        select['children'].push(obj);
        this.cmMenuTreeService.dataChange('create', select);
    }
    // 复选框操作
    checkChange(value, select) {
        if (value == true) {
            select.checked = true;
            this.cmMenuTreeService.dataChange('checked', select);
            // this.vote(true);
            if (this._cmcheckFathser == true) {
                this.vote(true);
            }
            if (select.children != []) {
                let arr = select.children;
                for (var i = 0; i < arr.length; i++) {
                    arr[i].checked = true;
                    if (arr[i].children != []) {
                        let arr1 = arr[i].children;
                        this.loop(true, arr1);
                    }
                }
            }
        }
        else {
            select.checked = false;
            // this.vote(false);
            if (this._cmcheckFathser == true) {
                this.vote(false);
            }
            this.cmMenuTreeService.dataChange('nocheck', select);
            if (select.children != []) {
                let arr = select.children;
                for (var i = 0; i < arr.length; i++) {
                    arr[i].checked = false;
                    if (arr[i].children != false) {
                        let arr1 = arr[i].children;
                        this.loop(false, arr1);
                    }
                }
            }
        }
    }
    // 循环调用
    loop(type, arr1) {
        for (var i = 0; i < arr1.length; i++) {
            this.checkChange(type, arr1[i]);
        }
    }
    // 复选框
    vote(type) {
        this.onVoted.emit(type);
    }
    // 循环调用复选框
    onVoteds(agreed, data) {
        if (agreed == true) {
            data.checked = true;
            this.vote(true);
        }
        else {
            let arr = data.children;
            let arr1 = [];
            for (var i = 0, len = arr.length; i < len; i++) {
                if (arr[i].checked == false) {
                    arr1.push(arr[i].checked);
                }
                if (arr1[len - 1] == false) {
                    data.checked = false;
                    this.vote(false);
                }
            }
        }
    }
    // 选中单选框
    radioThis(select) {
        this.cmMenuTreeService.selectRadio = select.id;
        this.cmMenuTreeService.getRadio(select);
    }
};
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmcheckFathser", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "hasSelect", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmHasChecked", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmHasEllips", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmHasShow", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmHasRadio", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmData", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmHasMenu", null);
__decorate([
    core_1.Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], MenuViewComponent.prototype, "cmMenu", null);
__decorate([
    core_1.Output(),
    __metadata("design:type", Object)
], MenuViewComponent.prototype, "onVoted", void 0);
__decorate([
    core_1.ViewChild("root"),
    __metadata("design:type", core_1.ElementRef)
], MenuViewComponent.prototype, "element", void 0);
MenuViewComponent = __decorate([
    core_1.Component({
        selector: 'cm-menuView',
        template: `
      <div #root>
          <div *ngFor="let comment of _cmData">
              <div class="menuView">
                  <div class="menuView-body item-{{comment.id}}" [ngClass]="comment.select && _hasSelect == true? 'clickItem':''" (mouseenter)="enterItems(comment)" (mouseleave)="leavesItems(comment)" (click)="clickItems(comment,_cmData)">
                      <div class="menuView-box">
                          <div class="menuView-icon" *ngIf="_cmHasShow">
                              <i class="anticon anticon-caret-down" (click)="comment.show = false" *ngIf="comment.show&&comment.children.length>0"></i>
                              <i class="anticon anticon-caret-right" (click)="comment.show = true" *ngIf="!comment.show&&comment.children.length>0"></i>
                          </div>
                          <div class="menuView-content">
                              <label nz-checkbox [(ngModel)]="comment.checked" (ngModelChange)="checkChange($event,comment)" *ngIf="_cmHasChecked"></label>
                              <label class="radio" (click)="radioThis(comment)" [ngClass]="comment.radio? 'radio-checked':''" *ngIf="_cmHasRadio"></label>
                              <i class="iconfont icon-kongwenjianjia" *ngIf="comment.children.length == 0"></i>
                              <i class="iconfont icon-wenjianjia1" *ngIf="comment.children.length>0"></i>
                              <div class="input-ok" style="position:relative;">
                                  <input type="text" [(ngModel)]="comment.content" id="input-{{comment.id}}" class="readonly" [readonly]="comment.readonly" [ngClass]="{'writeIn': !comment.readonly}" (keyup.enter)="updateOK(comment)" (blur)="inputBlur(comment)" />
                                  <i class="anticon anticon-check ok" *ngIf="!comment.readonly" (keyup.enter)="updateOK(comment)"></i>
                              </div>
                          </div>
                      </div>
                      <div class="menu" (mouseleave)="comment.menuShow = false" *ngIf="_cmHasMenu == true">
                          <i class="anticon anticon-ellipsis" *ngIf="comment.ellipsisShow&&_cmHasEllips == true" (click)="comment.menuShow = true"></i>
                          <!-- <i class="anticon anticon-ellipsis" (click)="comment.menuShow = true"></i> -->
                          <ul class="menu-list" *ngIf="comment.menuShow == true " (mouseleave)="comment.menuShow = false" class="ant-select-dropdown-menu ant-select-dropdown-menu-vertical ant-select-dropdown-menu-root">
                              <li *ngFor="let menu of comment.customMenu" class="ant-select-dropdown-menu-item ng-tns-c23-38 ng-star-inserted" (click)="select(menu.label,_cmData,comment)">
                                  {{menu.value}}
                              </li>
                          </ul>
                      </div>
                  </div>
                  <cm-menuView *ngIf="comment.children.length>0&&comment.show == true" [cmData]="comment.children" [cmMenu]="_cmMenu" class="menuView-item" (onVoted)="onVoteds($event,comment)" [cmHasChecked]="_cmHasChecked" [cmHasShow]="_cmHasShow" [cmHasRadio]="_cmHasRadio"
                      [cmHasEllips]="_cmHasEllips" [cmHasMenu]="_cmHasMenu" [hasSelect]="_hasSelect" [cmcheckFathser]="_cmcheckFathser"></cm-menuView>
              </div>
          </div>
      </div>
      <!-- [ngClass]="comment.select && _hasSelect == true? 'clickItem':''" -->
    `,
        styles: [`
      .menuView {
        padding-left: 10px;
      }
      .menuView-body {
        display: flex;
        height: 42px;
        align-items: center;
        justify-content: space-between;
        margin-right: 20px;
        border-right: 2px solid #fff;
      }
      .clickItem {
        border-color: #2a6cF0;
        background-color: #ecf6fd;
      }
      .menuView-box {
        width: calc(100% - 20px);
        display: flex;
        align-items: center;
      }
      .menuView-box :hover {
        cursor: pointer;
      }
      .menuView-body:hover .menuView-content {
        color: #2d8cf0;
      }
      .menuView-body:hover .menuView-content i {
        color: #2d8cf0;
      }
      .menuView-icon {
        width: 20px;
      }
      .anticon {
        color: #878e94;
        font-size: 12px;
      }
      .menu {
        width: 20px;
        height: 20px;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .menu i {
        font-size: 14px;
      }
      .menu ul {
        width: 100px;
        position: absolute;
        top: 18px;
        right: -41px;
        text-align: center;
        background: #fff;
        box-shadow: 0 0 10px #ddd;
        z-index: 10000;
        border-radius: 5px;
        z-index: 1;
      }
      .ant-select-dropdown-menu-item {
        line-height: 24px;
      }
      .ant-select-dropdown-menu-item:hover {
        background: #ecf6fd;
        color: #2d8cf0;
        cursor: pointer;
      }
      .readonly {
        border: none;
        width: calc(100% - 20px);
        padding: 3px;
        box-sizing: border-box;
        margin: 0 3px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .writeIn {
        border-bottom: 1px solid #ddd;
      }
      .menuView-content {
        position: relative;
        display: flex;
        align-items: center;
      }
      .ok {
        position: absolute;
        right: 0px;
        top: 7px;
      }
      .radio,
      .radio-checked {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        border: 1px solid #ddd;
        display: inline-block;
        margin-right: 5px;
        position: relative;
      }
      .readonly {
        background: none;
      }
      .radio-checked:after {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 1px solid #108ee9;
        content: '';
        animation-fill-mode: both;
      }
      .radio-checked:before {
        position: absolute;
        top: 3px;
        left: 3px;
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background: #108ee9;
        content: '';
        animation-fill-mode: both;
      }
      :host ::ng-deep .menuView .ant-select-dropdown-menu-item {
        width: 100%;
        display: flex !important;
        justify-content: center;
      }
      :host ::ng-deep .menuView .ant-checkbox-wrapper {
        margin-right: 5px;
      }
      :host ::ng-deep .menuView .ant-select-dropdown-menu-item {
        line-height: 24px;
      }
      .icon-kongwenjianjia,
      .icon-wenjianjia1 {
        color: #808695;
      }
    `]
    }),
    __metadata("design:paramtypes", [ng_cs_antd_1.NzModalService,
        cmMenuTree_service_1.CmMenuTreeService])
], MenuViewComponent);
exports.MenuViewComponent = MenuViewComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UvY21NZW51VHJlZS9tZW51Vmlldy9tZW51Vmlldy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx3Q0FBK0g7QUFDL0gsMkNBQTRDO0FBQzVDLDhEQUEwRDtBQUMxRCx5Q0FBbUM7QUEwTG5DLElBQWEsaUJBQWlCLEdBQTlCO0lBOERJLFlBQ1ksV0FBMkIsRUFDM0IsaUJBQW9DO1FBRHBDLGdCQUFXLEdBQVgsV0FBVyxDQUFnQjtRQUMzQixzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBdERoRCxVQUFLLEdBQVcsS0FBSyxDQUFDO1FBQ3RCLGVBQVUsR0FBVyxJQUFJLENBQUM7UUFpRGhCLFlBQU8sR0FBRyxJQUFJLG1CQUFZLEVBQVcsQ0FBQztJQU9oRCxDQUFDO0lBcERELElBQUksY0FBYyxDQUFDLGNBQW1CO1FBQ2xDLElBQUksQ0FBQyxlQUFlLEdBQUcsY0FBYyxDQUFDO0lBQzFDLENBQUM7SUFBQSxDQUFDO0lBR0YsSUFBSSxTQUFTLENBQUMsU0FBYztRQUN4QixJQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztJQUNoQyxDQUFDO0lBQUEsQ0FBQztJQUdGLElBQUksWUFBWSxDQUFDLFlBQWlCO1FBQzlCLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO0lBQ3RDLENBQUM7SUFBQSxDQUFDO0lBR0YsSUFBSSxXQUFXLENBQUMsV0FBZ0I7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxXQUFXLENBQUM7SUFDcEMsQ0FBQztJQUFBLENBQUM7SUFHRixJQUFJLFNBQVMsQ0FBQyxTQUFjO1FBQ3hCLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFBQSxDQUFDO0lBR0YsSUFBSSxVQUFVLENBQUMsVUFBZTtRQUMxQixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztJQUNsQyxDQUFDO0lBQUEsQ0FBQztJQUdGLElBQUksTUFBTSxDQUFDLE1BQVc7UUFD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QUFFOzs7b0RBR1A7QUFHRDtJQURDLFlBQUssRUFBRTs7O2tEQUdQO0FBR0Q7SUFEQyxZQUFLLEVBQUU7OzttREFHUDtBQUdEO0lBREMsWUFBSyxFQUFFOzs7K0NBR1A7QUFHRDtJQURDLFlBQUssRUFBRTs7O2tEQUdQO0FBSUQ7SUFEQyxZQUFLLEVBQUU7OzsrQ0FHUDtBQUVTO0lBQVQsYUFBTSxFQUFFOztrREFBdUM7QUFhN0I7SUFBbEIsZ0JBQVMsQ0FBQyxNQUFNLENBQUM7OEJBQVUsaUJBQVU7a0RBQUM7QUF6RTlCLGlCQUFpQjtJQXZMN0IsZ0JBQVMsQ0FBQztRQUNQLFFBQVEsRUFBRSxhQUFhO1FBQ3ZCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXFDVDtRQUNELE1BQU0sRUFBRSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0E2SVIsQ0FBQztLQUNMLENBQUM7cUNBZ0UyQiwyQkFBYztRQUNSLHNDQUFpQjtHQWhFdkMsaUJBQWlCLENBaVE3QjtBQWpRWSw4Q0FBaUIiLCJmaWxlIjoiYmFzZS9jbU1lbnVUcmVlL21lbnVWaWV3L21lbnVWaWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIFZpZXdDaGlsZCwgQ29udGVudENoaWxkLCBSZW5kZXJlcjIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE56TW9kYWxTZXJ2aWNlIH0gZnJvbSAnbmctY3MtYW50ZCc7XG5pbXBvcnQgeyBDbU1lbnVUcmVlU2VydmljZSB9IGZyb20gJy4uL2NtTWVudVRyZWUuc2VydmljZSc7XG5pbXBvcnQgeyBTY29wZSB9IGZyb20gJy4vY3JlYXRlSWQnO1xuaW1wb3J0IHsgUmFkaW9WYWx1ZSB9IGZyb20gJy4vcmFkaW8nO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2NtLW1lbnVWaWV3JyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgPGRpdiAjcm9vdD5cbiAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBjb21tZW50IG9mIF9jbURhdGFcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnVWaWV3XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVudVZpZXctYm9keSBpdGVtLXt7Y29tbWVudC5pZH19XCIgW25nQ2xhc3NdPVwiY29tbWVudC5zZWxlY3QgJiYgX2hhc1NlbGVjdCA9PSB0cnVlPyAnY2xpY2tJdGVtJzonJ1wiIChtb3VzZWVudGVyKT1cImVudGVySXRlbXMoY29tbWVudClcIiAobW91c2VsZWF2ZSk9XCJsZWF2ZXNJdGVtcyhjb21tZW50KVwiIChjbGljayk9XCJjbGlja0l0ZW1zKGNvbW1lbnQsX2NtRGF0YSlcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVudVZpZXctYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW51Vmlldy1pY29uXCIgKm5nSWY9XCJfY21IYXNTaG93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImFudGljb24gYW50aWNvbi1jYXJldC1kb3duXCIgKGNsaWNrKT1cImNvbW1lbnQuc2hvdyA9IGZhbHNlXCIgKm5nSWY9XCJjb21tZW50LnNob3cmJmNvbW1lbnQuY2hpbGRyZW4ubGVuZ3RoPjBcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImFudGljb24gYW50aWNvbi1jYXJldC1yaWdodFwiIChjbGljayk9XCJjb21tZW50LnNob3cgPSB0cnVlXCIgKm5nSWY9XCIhY29tbWVudC5zaG93JiZjb21tZW50LmNoaWxkcmVuLmxlbmd0aD4wXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnVWaWV3LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBuei1jaGVja2JveCBbKG5nTW9kZWwpXT1cImNvbW1lbnQuY2hlY2tlZFwiIChuZ01vZGVsQ2hhbmdlKT1cImNoZWNrQ2hhbmdlKCRldmVudCxjb21tZW50KVwiICpuZ0lmPVwiX2NtSGFzQ2hlY2tlZFwiPjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJyYWRpb1wiIChjbGljayk9XCJyYWRpb1RoaXMoY29tbWVudClcIiBbbmdDbGFzc109XCJjb21tZW50LnJhZGlvPyAncmFkaW8tY2hlY2tlZCc6JydcIiAqbmdJZj1cIl9jbUhhc1JhZGlvXCI+PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbmZvbnQgaWNvbi1rb25nd2VuamlhbmppYVwiICpuZ0lmPVwiY29tbWVudC5jaGlsZHJlbi5sZW5ndGggPT0gMFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbmZvbnQgaWNvbi13ZW5qaWFuamlhMVwiICpuZ0lmPVwiY29tbWVudC5jaGlsZHJlbi5sZW5ndGg+MFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1va1wiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgWyhuZ01vZGVsKV09XCJjb21tZW50LmNvbnRlbnRcIiBpZD1cImlucHV0LXt7Y29tbWVudC5pZH19XCIgY2xhc3M9XCJyZWFkb25seVwiIFtyZWFkb25seV09XCJjb21tZW50LnJlYWRvbmx5XCIgW25nQ2xhc3NdPVwieyd3cml0ZUluJzogIWNvbW1lbnQucmVhZG9ubHl9XCIgKGtleXVwLmVudGVyKT1cInVwZGF0ZU9LKGNvbW1lbnQpXCIgKGJsdXIpPVwiaW5wdXRCbHVyKGNvbW1lbnQpXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImFudGljb24gYW50aWNvbi1jaGVjayBva1wiICpuZ0lmPVwiIWNvbW1lbnQucmVhZG9ubHlcIiAoa2V5dXAuZW50ZXIpPVwidXBkYXRlT0soY29tbWVudClcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnVcIiAobW91c2VsZWF2ZSk9XCJjb21tZW50Lm1lbnVTaG93ID0gZmFsc2VcIiAqbmdJZj1cIl9jbUhhc01lbnUgPT0gdHJ1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImFudGljb24gYW50aWNvbi1lbGxpcHNpc1wiICpuZ0lmPVwiY29tbWVudC5lbGxpcHNpc1Nob3cmJl9jbUhhc0VsbGlwcyA9PSB0cnVlXCIgKGNsaWNrKT1cImNvbW1lbnQubWVudVNob3cgPSB0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIDxpIGNsYXNzPVwiYW50aWNvbiBhbnRpY29uLWVsbGlwc2lzXCIgKGNsaWNrKT1cImNvbW1lbnQubWVudVNob3cgPSB0cnVlXCI+PC9pPiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibWVudS1saXN0XCIgKm5nSWY9XCJjb21tZW50Lm1lbnVTaG93ID09IHRydWUgXCIgKG1vdXNlbGVhdmUpPVwiY29tbWVudC5tZW51U2hvdyA9IGZhbHNlXCIgY2xhc3M9XCJhbnQtc2VsZWN0LWRyb3Bkb3duLW1lbnUgYW50LXNlbGVjdC1kcm9wZG93bi1tZW51LXZlcnRpY2FsIGFudC1zZWxlY3QtZHJvcGRvd24tbWVudS1yb290XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IG1lbnUgb2YgY29tbWVudC5jdXN0b21NZW51XCIgY2xhc3M9XCJhbnQtc2VsZWN0LWRyb3Bkb3duLW1lbnUtaXRlbSBuZy10bnMtYzIzLTM4IG5nLXN0YXItaW5zZXJ0ZWRcIiAoY2xpY2spPVwic2VsZWN0KG1lbnUubGFiZWwsX2NtRGF0YSxjb21tZW50KVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7bWVudS52YWx1ZX19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Y20tbWVudVZpZXcgKm5nSWY9XCJjb21tZW50LmNoaWxkcmVuLmxlbmd0aD4wJiZjb21tZW50LnNob3cgPT0gdHJ1ZVwiIFtjbURhdGFdPVwiY29tbWVudC5jaGlsZHJlblwiIFtjbU1lbnVdPVwiX2NtTWVudVwiIGNsYXNzPVwibWVudVZpZXctaXRlbVwiIChvblZvdGVkKT1cIm9uVm90ZWRzKCRldmVudCxjb21tZW50KVwiIFtjbUhhc0NoZWNrZWRdPVwiX2NtSGFzQ2hlY2tlZFwiIFtjbUhhc1Nob3ddPVwiX2NtSGFzU2hvd1wiIFtjbUhhc1JhZGlvXT1cIl9jbUhhc1JhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICBbY21IYXNFbGxpcHNdPVwiX2NtSGFzRWxsaXBzXCIgW2NtSGFzTWVudV09XCJfY21IYXNNZW51XCIgW2hhc1NlbGVjdF09XCJfaGFzU2VsZWN0XCIgW2NtY2hlY2tGYXRoc2VyXT1cIl9jbWNoZWNrRmF0aHNlclwiPjwvY20tbWVudVZpZXc+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8IS0tIFtuZ0NsYXNzXT1cImNvbW1lbnQuc2VsZWN0ICYmIF9oYXNTZWxlY3QgPT0gdHJ1ZT8gJ2NsaWNrSXRlbSc6JydcIiAtLT5cbiAgICBgLFxuICAgIHN0eWxlczogW2BcbiAgICAgIC5tZW51VmlldyB7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMTBweDtcbiAgICAgIH1cbiAgICAgIC5tZW51Vmlldy1ib2R5IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgaGVpZ2h0OiA0MnB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgI2ZmZjtcbiAgICAgIH1cbiAgICAgIC5jbGlja0l0ZW0ge1xuICAgICAgICBib3JkZXItY29sb3I6ICMyYTZjRjA7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlY2Y2ZmQ7XG4gICAgICB9XG4gICAgICAubWVudVZpZXctYm94IHtcbiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDIwcHgpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuICAgICAgLm1lbnVWaWV3LWJveCA6aG92ZXIge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgICAubWVudVZpZXctYm9keTpob3ZlciAubWVudVZpZXctY29udGVudCB7XG4gICAgICAgIGNvbG9yOiAjMmQ4Y2YwO1xuICAgICAgfVxuICAgICAgLm1lbnVWaWV3LWJvZHk6aG92ZXIgLm1lbnVWaWV3LWNvbnRlbnQgaSB7XG4gICAgICAgIGNvbG9yOiAjMmQ4Y2YwO1xuICAgICAgfVxuICAgICAgLm1lbnVWaWV3LWljb24ge1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgIH1cbiAgICAgIC5hbnRpY29uIHtcbiAgICAgICAgY29sb3I6ICM4NzhlOTQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIH1cbiAgICAgIC5tZW51IHtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIGhlaWdodDogMjBweDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIC5tZW51IGkge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG4gICAgICAubWVudSB1bCB7XG4gICAgICAgIHdpZHRoOiAxMDBweDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDE4cHg7XG4gICAgICAgIHJpZ2h0OiAtNDFweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgICBib3gtc2hhZG93OiAwIDAgMTBweCAjZGRkO1xuICAgICAgICB6LWluZGV4OiAxMDAwMDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgfVxuICAgICAgLmFudC1zZWxlY3QtZHJvcGRvd24tbWVudS1pdGVtIHtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gICAgICB9XG4gICAgICAuYW50LXNlbGVjdC1kcm9wZG93bi1tZW51LWl0ZW06aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZWNmNmZkO1xuICAgICAgICBjb2xvcjogIzJkOGNmMDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuICAgICAgLnJlYWRvbmx5IHtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMjBweCk7XG4gICAgICAgIHBhZGRpbmc6IDNweDtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgbWFyZ2luOiAwIDNweDtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICAud3JpdGVJbiB7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1xuICAgICAgfVxuICAgICAgLm1lbnVWaWV3LWNvbnRlbnQge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICAub2sge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHJpZ2h0OiAwcHg7XG4gICAgICAgIHRvcDogN3B4O1xuICAgICAgfVxuICAgICAgLnJhZGlvLFxuICAgICAgLnJhZGlvLWNoZWNrZWQge1xuICAgICAgICB3aWR0aDogMTRweDtcbiAgICAgICAgaGVpZ2h0OiAxNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cbiAgICAgIC5yZWFkb25seSB7XG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICB9XG4gICAgICAucmFkaW8tY2hlY2tlZDphZnRlciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMxMDhlZTk7XG4gICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICBhbmltYXRpb24tZmlsbC1tb2RlOiBib3RoO1xuICAgICAgfVxuICAgICAgLnJhZGlvLWNoZWNrZWQ6YmVmb3JlIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDNweDtcbiAgICAgICAgbGVmdDogM3B4O1xuICAgICAgICB3aWR0aDogNXB4O1xuICAgICAgICBoZWlnaHQ6IDVweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMTA4ZWU5O1xuICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDtcbiAgICAgIH1cbiAgICAgIDpob3N0IDo6bmctZGVlcCAubWVudVZpZXcgLmFudC1zZWxlY3QtZHJvcGRvd24tbWVudS1pdGVtIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICB9XG4gICAgICA6aG9zdCA6Om5nLWRlZXAgLm1lbnVWaWV3IC5hbnQtY2hlY2tib3gtd3JhcHBlciB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgfVxuICAgICAgOmhvc3QgOjpuZy1kZWVwIC5tZW51VmlldyAuYW50LXNlbGVjdC1kcm9wZG93bi1tZW51LWl0ZW0ge1xuICAgICAgICBsaW5lLWhlaWdodDogMjRweDtcbiAgICAgIH1cbiAgICAgIC5pY29uLWtvbmd3ZW5qaWFuamlhLFxuICAgICAgLmljb24td2VuamlhbmppYTEge1xuICAgICAgICBjb2xvcjogIzgwODY5NTtcbiAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBNZW51Vmlld0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgX2NtRGF0YTogYW55O1xuICAgIF9jbU1lbnU6IGFueTtcbiAgICBfY21IYXNDaGVja2VkOiBib29sZWFuO1xuICAgIF9jbUhhc1Nob3c6IGJvb2xlYW47XG4gICAgX2NtSGFzUmFkaW86IGJvb2xlYW47XG4gICAgX2NtSGFzRWxsaXBzOiBib29sZWFuO1xuICAgIF9jbUhhc01lbnU6IGJvb2xlYW47XG4gICAgcmFkaW9WYWx1ZTogc3RyaW5nO1xuICAgIGRhdGE6IGFueTtcbiAgICBjbGljazpib29sZWFuID0gZmFsc2U7XG4gICAgX2hhc1NlbGVjdDpib29sZWFuID0gdHJ1ZTtcbiAgICBfY21jaGVja0ZhdGhzZXI6Ym9vbGVhbjtcbiAgICBcbiAgICBASW5wdXQoKVxuICAgIHNldCBjbWNoZWNrRmF0aHNlcihjbWNoZWNrRmF0aHNlcjogYW55KSB7XG4gICAgICAgIHRoaXMuX2NtY2hlY2tGYXRoc2VyID0gY21jaGVja0ZhdGhzZXI7XG4gICAgfTtcblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IGhhc1NlbGVjdChoYXNTZWxlY3Q6IGFueSkge1xuICAgICAgICB0aGlzLl9oYXNTZWxlY3QgPSBoYXNTZWxlY3Q7XG4gICAgfTtcblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IGNtSGFzQ2hlY2tlZChjbUhhc0NoZWNrZWQ6IGFueSkge1xuICAgICAgICB0aGlzLl9jbUhhc0NoZWNrZWQgPSBjbUhhc0NoZWNrZWQ7XG4gICAgfTtcblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IGNtSGFzRWxsaXBzKGNtSGFzRWxsaXBzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fY21IYXNFbGxpcHMgPSBjbUhhc0VsbGlwcztcbiAgICB9O1xuXG4gICAgQElucHV0KClcbiAgICBzZXQgY21IYXNTaG93KGNtSGFzU2hvdzogYW55KSB7XG4gICAgICAgIHRoaXMuX2NtSGFzU2hvdyA9IGNtSGFzU2hvdztcbiAgICB9O1xuXG4gICAgQElucHV0KClcbiAgICBzZXQgY21IYXNSYWRpbyhjbUhhc1JhZGlvOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fY21IYXNSYWRpbyA9IGNtSGFzUmFkaW87XG4gICAgfTtcblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IGNtRGF0YShjbURhdGE6IGFueSkge1xuICAgICAgICB0aGlzLl9jbURhdGEgPSBjbURhdGFcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCBjbUhhc01lbnUoY21IYXNNZW51OiBhbnkpIHtcbiAgICAgICAgdGhpcy5fY21IYXNNZW51ID0gY21IYXNNZW51O1xuICAgIH07XG5cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IGNtTWVudShjbU1lbnU6IGFueSkge1xuICAgICAgICB0aGlzLl9jbU1lbnUgPSBjbU1lbnVcbiAgICB9XG5cbiAgICBAT3V0cHV0KCkgb25Wb3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbmZpcm1TZXJ2OiBOek1vZGFsU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBjbU1lbnVUcmVlU2VydmljZTogQ21NZW51VHJlZVNlcnZpY2VcbiAgICApIHtcblxuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBAVmlld0NoaWxkKFwicm9vdFwiKSBlbGVtZW50OiBFbGVtZW50UmVmO1xuXG5cbiAgICAvLyDnp7vlhaXlj5joibJcbiAgICBlbnRlckl0ZW1zKHNlbGVjdDogYW55KSB7XG4gICAgICAgIHNlbGVjdC5lbGxpcHNpc1Nob3cgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIOenu+WHuuWPmOiJslxuICAgIGxlYXZlc0l0ZW1zKHNlbGVjdDogYW55KSB7XG4gICAgICAgIHNlbGVjdC5lbGxpcHNpc1Nob3cgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBcbiAgICAvLyDngrnlh7vmoJHnirZcbiAgICBjbGlja0l0ZW1zKHNlbGVjdDogYW55LGRhdGE6YW55KSB7XG4gICAgICAgIHRoaXMuY21NZW51VHJlZVNlcnZpY2UuY2xpY2tJdGVtcyhzZWxlY3QpO1xuICAgIH1cblxuICAgIC8vIOeCueWHu+iPnOWNlemhuVxuICAgIHNlbGVjdCh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSwgc2VsZWN0OiBhbnkpIHtcbiAgICAgICAgc2VsZWN0Lm1lbnVTaG93ID0gZmFsc2U7XG4gICAgICAgIHNlbGVjdC5lbGxpcHNpc1Nob3cgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZShkYXRhLCBzZWxlY3QpXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAndXBkYXRlJykge1xuICAgICAgICAgICAgc2VsZWN0LnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgI2lucHV0LSR7c2VsZWN0LmlkfWApLmZvY3VzKClcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdjcmVhdGUnKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEZpbGUoc2VsZWN0KVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJtb3ZlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY21NZW51VHJlZVNlcnZpY2UubW92ZUZpbGUoc2VsZWN0LCBkYXRhKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbU1lbnVUcmVlU2VydmljZS5jcmVhdGVNZW51KHR5cGUsIHNlbGVjdClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOi+k+WFpeahhuWkseeEplxuICAgIGlucHV0Qmx1cihjb21tZW50OiBhbnkpIHtcbiAgICAgICAgY29tbWVudC5yZWFkb25seSA9IHRydWU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCNpbnB1dC0ke2NvbW1lbnQuaWR9YCkuYmx1cigpXG4gICAgfVxuXG5cblxuICAgIC8vIOe8lui+keehruiupFxuICAgIHVwZGF0ZU9LKGNvbW1lbnQ6IGFueSkge1xuICAgICAgICBjb21tZW50LnJlYWRvbmx5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbU1lbnVUcmVlU2VydmljZS5kYXRhQ2hhbmdlKCd1cGRhdGUnLCBjb21tZW50KTtcbiAgICB9XG5cbiAgICAvLyDliKDpmaTmlofku7ZcbiAgICByZW1vdmVGaWxlKGRhdGE6IGFueSwgc2VsZWN0OiBhbnkpIHtcbiAgICAgICAgbGV0IHRpdGxlID0gJyc7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGVjdC5jaGlsZHJlbiA9PSBbXSB8fCBzZWxlY3QuY2hpbGRyZW4ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRpdGxlID0gYOaCqOaYr+WQpuehruiupOimgeWIoOmZpCR7c2VsZWN0LmNvbnRlbnR9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpdGxlID0gYCR7c2VsZWN0LmNvbnRlbnR95YyF5ZCr5aSa5Liq5paH5Lu277yM5piv5ZCm56Gu6K6k5Yig6ZmkYDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmZpcm1TZXJ2LmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgb25PaygpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV0uaWQgPT0gc2VsZWN0LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNwbGljZShpLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5jbU1lbnVUcmVlU2VydmljZS5kYXRhQ2hhbmdlKCdkZWxldGUnLCBzZWxlY3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ2FuY2VsKCkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g5paw5aKe5paH5Lu2XG4gICAgYWRkRmlsZShzZWxlY3Q6IGFueSkge1xuICAgICAgICBsZXQgc2NvcGVJZCA9IFNjb3BlLmdldEluc3RhbmNlKCkuZ2V0c2NvcGUoKTtcbiAgICAgICAgbGV0IG9iaiA9IHtcbiAgICAgICAgICAgIFwiaWRcIjogc2NvcGVJZCxcbiAgICAgICAgICAgIFwiY29udGVudFwiOiBcIlwiLFxuICAgICAgICAgICAgXCJzaG93XCI6IHRydWUsXG4gICAgICAgICAgICBcImVsbGlwc2lzU2hvd1wiOiBmYWxzZSxcbiAgICAgICAgICAgIFwibWVudVNob3dcIjogZmFsc2UsXG4gICAgICAgICAgICBcImNoZWNrZWRcIjogZmFsc2UsXG4gICAgICAgICAgICBcInJlYWRvbmx5XCI6IHRydWUsXG4gICAgICAgICAgICBcInNlbGVjdFwiOmZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBvYmpbJ2NoaWxkcmVuJ10gPSBbXTtcbiAgICAgICAgb2JqWydjdXN0b21NZW51J10gPSB0aGlzLl9jbU1lbnU7XG4gICAgICAgIGlmIChzZWxlY3QuY2hlY2tlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICBvYmpbJ2NoZWNrZWQnXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdC5jaGlsZHJlbiAhPSBbXSkge1xuICAgICAgICAgICAgb2JqLmNvbnRlbnQgPSAn5paw5aKe5paH5Lu2JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9iai5jb250ZW50ID0gJ+aWsOWinuaWh+S7tic7XG4gICAgICAgICAgICBzZWxlY3RbJ2NoaWxkcmVuJ10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RbJ2NoaWxkcmVuJ10ucHVzaChvYmopXG4gICAgICAgIHRoaXMuY21NZW51VHJlZVNlcnZpY2UuZGF0YUNoYW5nZSgnY3JlYXRlJywgc2VsZWN0KTtcbiAgICB9XG5cbiAgICAvLyDlpI3pgInmoYbmk43kvZxcbiAgICBjaGVja0NoYW5nZSh2YWx1ZTogYW55LCBzZWxlY3Q6IGFueSkge1xuICAgICAgICBpZiAodmFsdWUgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgc2VsZWN0LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jbU1lbnVUcmVlU2VydmljZS5kYXRhQ2hhbmdlKCdjaGVja2VkJywgc2VsZWN0KTtcbiAgICAgICAgICAgIC8vIHRoaXMudm90ZSh0cnVlKTtcbiAgICAgICAgICAgIGlmKHRoaXMuX2NtY2hlY2tGYXRoc2VyID09IHRydWUpe1xuICAgICAgICAgICAgICAgIHRoaXMudm90ZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxlY3QuY2hpbGRyZW4gIT0gW10pIHtcbiAgICAgICAgICAgICAgICBsZXQgYXJyID0gc2VsZWN0LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycltpXS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFycltpXS5jaGlsZHJlbiAhPSBbXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFycjEgPSBhcnJbaV0uY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3AodHJ1ZSwgYXJyMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAvLyB0aGlzLnZvdGUoZmFsc2UpO1xuICAgICAgICAgICAgaWYodGhpcy5fY21jaGVja0ZhdGhzZXIgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy52b3RlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY21NZW51VHJlZVNlcnZpY2UuZGF0YUNoYW5nZSgnbm9jaGVjaycsIHNlbGVjdCk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LmNoaWxkcmVuICE9IFtdKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFyciA9IHNlbGVjdC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBhcnJbaV0uY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyW2ldLmNoaWxkcmVuICE9IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJyMSA9IGFycltpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcChmYWxzZSwgYXJyMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5b6q546v6LCD55SoXG4gICAgbG9vcCh0eXBlOiBib29sZWFuLCBhcnIxOiBhbnkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQ2hhbmdlKHR5cGUsIGFycjFbaV0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlpI3pgInmoYZcbiAgICB2b3RlKHR5cGU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5vblZvdGVkLmVtaXQodHlwZSlcbiAgICB9XG4gICAgLy8g5b6q546v6LCD55So5aSN6YCJ5qGGXG4gICAgb25Wb3RlZHMoYWdyZWVkOiBib29sZWFuLCBkYXRhOiBhbnkpIHtcbiAgICAgICAgaWYgKGFncmVlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICBkYXRhLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52b3RlKHRydWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgYXJyID0gZGF0YS5jaGlsZHJlbjtcbiAgICAgICAgICAgIGxldCBhcnIxID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXS5jaGVja2VkID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycjEucHVzaChhcnJbaV0uY2hlY2tlZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFycjFbbGVuIC0gMV0gPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudm90ZShmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIOmAieS4reWNlemAieahhlxuICAgIHJhZGlvVGhpcyhzZWxlY3Q6IGFueSkge1xuICAgICAgICB0aGlzLmNtTWVudVRyZWVTZXJ2aWNlLnNlbGVjdFJhZGlvID0gc2VsZWN0LmlkO1xuICAgICAgICB0aGlzLmNtTWVudVRyZWVTZXJ2aWNlLmdldFJhZGlvKHNlbGVjdCk7XG5cbiAgICB9XG5cblxufVxuXG5cbiJdfQ==
