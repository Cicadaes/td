<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="td.enterprise.dao.TagsInfoDao">
    <!-- Result Map-->
    <resultMap id="BaseResultMap" type="td.enterprise.entity.TagsInfo">
        <result column="id" property="id"/>
        <result column="tag_name" property="tagName"/>
        <result column="tag_fullname" property="tagFullname"/>
        <result column="tag_code" property="tagCode"/>
        <result column="tag_level" property="tagLevel"/>
    </resultMap>

    <!-- TD_TAGS_INFO table all fields -->
    <sql id="Base_Column_List">
        id,tag_name,tag_fullname,tag_code,tag_level
    </sql>

    <!-- 查询条件 -->
    <sql id="Base_Where_Clause">
        where 1=1
        <trim suffixOverrides=",">
            <if test="id != null and id != ''">
                and id = #{id}
            </if>
            <if test="tagName != null and tagName != ''">
                and tag_name = #{tagName}
            </if>
            <if test="tagFullname != null and tagFullname != ''">
                and tag_fullname = #{tagFullname}
            </if>
            <if test="tagCode != null and tagCode != ''">
                and tag_code = #{tagCode}
            </if>
            <if test="tagLevel != null and tagLevel != ''">
                and tag_level = #{tagLevel}
            </if>
        </trim>
    </sql>

    <!-- 插入记录 -->
    <insert id="insert" parameterType="Object">
        <selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into TD_TAGS_INFO(id,tag_name,tag_fullname,tag_code,tag_level)
        values(#{id},#{tagName},#{tagFullname},#{tagCode},#{tagLevel})
    </insert>

    <!-- 根据id，修改记录-->
    <update id="updateByPrimaryKey" parameterType="Object">
        update TD_TAGS_INFO set
        tag_name=#{tagName},tag_fullname=#{tagFullname},tag_code=#{tagCode},tag_level=#{tagLevel} where id=#{id}
    </update>

    <!-- 修改记录，只修改只不为空的字段 -->
    <update id="updateByPrimaryKeySelective" parameterType="Object">
        update TD_TAGS_INFO set
        <trim suffixOverrides=",">
            <if test="tagName != null  ">
                tag_name=#{tagName},
            </if>
            <if test="tagFullname != null  ">
                tag_fullname=#{tagFullname},
            </if>
            <if test="tagCode != null  ">
                tag_code=#{tagCode},
            </if>
            <if test="tagLevel != null  ">
                tag_level=#{tagLevel},
            </if>
        </trim>
        where id=#{id}
    </update>

    <!-- 根据id查询 标签信息 -->
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="Object">
        select
        <include refid="Base_Column_List"/>
        from TD_TAGS_INFO where id = #{id}
    </select>

    <!-- 删除记录 -->
    <delete id="deleteByPrimaryKey" parameterType="Object">
        delete from TD_TAGS_INFO where id = #{id}
    </delete>

    <!-- 标签信息 列表总数-->
    <select id="queryByCount" resultType="java.lang.Integer" parameterType="Object">
        select count(1) from TD_TAGS_INFO
        <include refid="Base_Where_Clause"/>
    </select>

    <!-- 查询标签信息列表 -->
    <select id="queryByList" resultMap="BaseResultMap" parameterType="Object">
        select
        <include refid="Base_Column_List"/>
        from TD_TAGS_INFO
        <include refid="Base_Where_Clause"/>
        <if test="pager.orderCondition != null and pager.orderCondition != ''">
            ${pager.orderCondition}
        </if>
        <if test="pager.mysqlQueryCondition != null and pager.mysqlQueryCondition != ''">
            ${pager.mysqlQueryCondition}
        </if>
    </select>

    <!-- 查询标签信息列表 queryByCodeList -->
    <select id="queryByCodeList" resultMap="BaseResultMap" parameterType="java.util.List">
        select
        <include refid="Base_Column_List"/>
        from TD_TAGS_INFO tag
        WHERE tag.tag_code IN
        <foreach collection="list" open="(" separator="," close=")" item="item">
            #{item}
        </foreach>
    </select>

    <!-- 根据id查询 标签信息 -->
    <select id="selectByMatchCode" resultMap="BaseResultMap" parameterType="Object">
        select
        <include refid="Base_Column_List"/>
        from TD_TAGS_INFO where tag_code like #{tagCode}"%" and tag_level = #{tagLevel}
    </select>

    <!-- 根据tagcode模糊查询 标签信息 -->
    <select id="queryByMatchCode" resultMap="BaseResultMap" parameterType="Object">
        select
        <include refid="Base_Column_List"/>
        from TD_TAGS_INFO where tag_code like #{tagCode}"%"
    </select>
</mapper>
