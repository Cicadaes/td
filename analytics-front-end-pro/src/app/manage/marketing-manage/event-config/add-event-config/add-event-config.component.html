<nz-modal [(nzVisible)]="isVisible" nzWrapClassName="vertical-center-modal" [nzTitle]="modalTitle" [nzContent]="modalContent"
    [nzFooter]="modalFooter" (nzOnCancel)="handleCancel($event)" [nzMaskClosable]='false'>
    <ng-template #modalTitle>
        <span *ngIf="editFlag">编辑事件</span>
        <span *ngIf="!editFlag">新建事件</span>
    </ng-template>
    <ng-template #modalContent>
        <div></div>
        <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" autocomplete="off">
            <nz-form-item>
                <nz-form-label [nzSpan]="4" nzRequired nzFor="name">事件名称</nz-form-label>
                <nz-form-control [nzSpan]="19" style="float: right;">
                    <input id="name" type="name" nz-input formControlName="name" placeholder="请输入事件名称">
                    <nz-form-explain *ngIf="getFormControl('name').dirty && getFormControl('name').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('name').errors.required">
                            请输入事件名称
                        </ng-container>
                        <ng-container *ngIf="getFormControl('name').errors.nameError">
                            请输入中文或英文格式
                        </ng-container>
                        <ng-container *ngIf="getFormControl('name').errors.maxlength">
                            事件名称不能超过32个字符
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
            </nz-form-item>
            <nz-form-item *ngIf="!editFlag">
                <nz-form-label [nzSpan]="4" nzRequired nzFor="code">事件选择</nz-form-label>
                <nz-form-control [nzSpan]="19" style="float: right;">
                    <nz-select [(ngModel)]="_name" class="input-item" formControlName="code" nzPlaceHolder="请选事件">
                        <nz-option nzCustomContent [nzValue]="item" [nzLabel]="item.name" *ngFor="let item of eventValueList">
                            <span title="{{item.name}}">{{item.name}}</span>
                        </nz-option>
                    </nz-select>
                    <nz-form-explain *ngIf="getFormControl('code').dirty && getFormControl('code').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('code').errors.required">
                            请选择事件
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="4" nzFor="code" nzRequired class="cover-ant-form-item-label">添加至</nz-form-label>
                <nz-form-control [nzSpan]="19" style="float: right;">
                    <label nz-checkbox [(ngModel)]="timerFlag" [ngModelOptions]="{standalone: true}">计时器</label>
                    <label nz-checkbox [(ngModel)]="triggerFlag" [ngModelOptions]="{standalone: true}">触发器-事件</label>
                    <label nz-checkbox [(ngModel)]="forbidFlag" [ngModelOptions]="{standalone: true}">禁止规则</label>
                    <label nz-checkbox [(ngModel)]="funnelFlag" [ngModelOptions]="{standalone: true}">漏斗</label>

                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="4" nzFor="description" nzRequired class="cover-ant-form-item-label">描述</nz-form-label>
                <nz-form-control [nzSpan]="19" style="float: right;">
                    <textarea id="description" type="description" nz-input formControlName="description" placeholder="请输入描述"></textarea>
                    <nz-form-explain *ngIf="getFormControl('description').dirty && getFormControl('description').errors" style="color: #f5222d;">
                        <ng-container *ngIf="getFormControl('description').errors.maxlength">
                            描述不能超过480个字符
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-template>
    <ng-template #modalFooter>
        <button nz-button [nzType]="'default'" [nzSize]="small" (click)="handleCancel($event)">
            取消
        </button>
        <button nz-button [nzType]="'primary'" [nzSize]="small" (click)="save()">
            保存
        </button>
    </ng-template>
</nz-modal>