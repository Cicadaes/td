<nz-modal
  [(nzVisible)]="isVisible"
  nzWrapClassName="vertical-center-modal"
  [nzTitle]="modalTitle"
  [nzContent]="modalContent"
  [nzFooter]="modalFooter"
  (nzOnCancel)="handleCancel($event)"
  [nzMaskClosable]="false"
  [nzWidth]="600"
>
  <ng-template #modalTitle>
    <span *ngIf="editFlag">编辑人群维度</span>
    <span *ngIf="!editFlag">新建人群维度</span>
  </ng-template>
  <ng-template #modalContent>
    <div></div>
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" autocomplete="off">
      <nz-form-item>
        <nz-form-label [nzSpan]="3" nzRequired nzFor="name">维度名称</nz-form-label>
        <nz-form-control [nzSpan]="20" style="float: right;">
          <input id="name" type="name" nz-input formControlName="name" placeholder="请输入维度名称" />
          <nz-form-explain
            *ngIf="getFormControl('name').dirty && getFormControl('name').errors"
            style="color: #f5222d;"
          >
            <ng-container *ngIf="getFormControl('name').errors.required">
              请输入维度名称
            </ng-container>
            <ng-container *ngIf="getFormControl('name').errors.nameError">
              请输入中文或英文格式
            </ng-container>
            <ng-container *ngIf="getFormControl('name').errors.maxlength">
              维度名称不能超过32个字符
            </ng-container>
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="!editFlag">
        <nz-form-label [nzSpan]="3" nzRequired nzFor="value">维度指标</nz-form-label>
        <nz-form-control [nzSpan]="20" style="float: right;">
          <nz-select
            [(ngModel)]="_name"
            (ngModelChange)="selectName($event)"
            class="input-item"
            formControlName="value"
            nzPlaceHolder="请选择维度值"
          >
            <nz-option nzCustomContent [nzValue]="item" [nzLabel]="item.name" *ngFor="let item of dimensionList">
              <span title="{{ item.name }}">{{ item.name }}</span>
            </nz-option>
          </nz-select>
          <nz-form-explain
            *ngIf="getFormControl('value').dirty && getFormControl('value').errors"
            style="color: #f5222d;"
          >
            <ng-container *ngIf="getFormControl('value').errors.required">
              请选择维度
            </ng-container>
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="3" nzRequired nzFor="code">编码</nz-form-label>
        <nz-form-control [nzSpan]="20" style="float: right;">
          <input id="code" type="code" nz-input formControlName="code" placeholder="请输入编码" readonly />
          <nz-form-explain
            *ngIf="getFormControl('code').dirty && getFormControl('code').errors"
            style="color: #f5222d;"
          >
            <ng-container *ngIf="getFormControl('code').errors.required">
              请输入编码
            </ng-container>
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="3" nzFor="description" nzRequired class="cover-ant-form-item-label"
          >描述</nz-form-label
        >
        <nz-form-control [nzSpan]="20" style="float: right;">
          <textarea
            id="description"
            type="description"
            nz-input
            formControlName="description"
            placeholder="请输入描述"
          ></textarea>
          <nz-form-explain
            *ngIf="getFormControl('description').dirty && getFormControl('description').errors"
            style="color: #f5222d;"
          >
            <ng-container *ngIf="getFormControl('description').errors.maxlength">
              描述不能超过255个字符
            </ng-container>
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="3" nzFor="dimensionalityValue">维度值选择</nz-form-label>
        <nz-form-control [nzSpan]="20" style="float: right;">
          <nz-transfer
            [nzDataSource]="valueData"
            nzShowSearch
            [nzTitles]="['可选维度值', '已选维度值']"
            [nzRender]="render"
            [nzItemUnit]="'个'"
            [nzItemsUnit]="'个'"
            [nzListStyle]="{ 'width.px': 210, 'height.px': 260 }"
            [nzFilterOption]="filterOption"
            (nzSearchChange)="search($event)"
            (nzSelectChange)="select($event)"
            (nzChange)="change($event)"
          >
            <ng-template #render let-item>
              {{ item.dicItemValue }}
            </ng-template>
          </nz-transfer>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-template>
  <ng-template #modalFooter>
    <button nz-button [nzType]="'default'" [nzSize]="small" (click)="handleCancel($event)">
      取消
    </button>
    <button nz-button [nzType]="'primary'" [nzSize]="small" (click)="save()">
      保存
    </button>
  </ng-template>
</nz-modal>
